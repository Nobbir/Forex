Oanda practice nobbir2

f88638a51e995d11f7e013e551231135-afd5c8158b87bd58d42a0e81da7a25ed



Microsoft Windows [Version 10.0.18362.836]
(c) 2019 Microsoft Corporation. All rights reserved.

C:\Users\nobbir>python
Python 3.7.3 (v3.7.3:ef4ec6ed12, Mar 25 2019, 22:22:05) [MSC v.1916 64 bit (AMD64)] on win32
Type "help", "copyright", "credits" or "license" for more information.
>>> import oanda-backtest
  File "<stdin>", line 1
    import oanda-backtest
                ^
SyntaxError: invalid syntax
>>> from oanda_backtest import Backtest
>>> tk = 'f88638a51e995d11f7e013e551231135-afd5c8158b87bd58d42a0e81da7a25ed'
>>> bt = Backtest(access_token=tk, environment='practice')
>>> bt.candles("EUR_USD")
                                 O        H        L        C     V
T
2020-06-05 02:40:40+00:00  1.13293  1.13293  1.13293  1.13293   1.0
2020-06-05 02:40:45+00:00  1.13290  1.13290  1.13290  1.13290   1.0
2020-06-05 02:40:50+00:00  1.13292  1.13294  1.13292  1.13294   2.0
2020-06-05 02:40:55+00:00  1.13291  1.13291  1.13291  1.13291   1.0
2020-06-05 02:41:00+00:00  1.13290  1.13290  1.13288  1.13289   3.0
2020-06-05 02:41:05+00:00  1.13288  1.13288  1.13286  1.13286   2.0
2020-06-05 02:41:10+00:00  1.13284  1.13284  1.13284  1.13284   1.0
2020-06-05 02:41:20+00:00  1.13283  1.13283  1.13282  1.13282   2.0
2020-06-05 02:41:25+00:00  1.13283  1.13284  1.13283  1.13284   2.0
2020-06-05 02:41:30+00:00  1.13286  1.13286  1.13286  1.13286   1.0
2020-06-05 02:41:35+00:00  1.13285  1.13286  1.13283  1.13284   7.0
2020-06-05 02:41:40+00:00  1.13286  1.13286  1.13286  1.13286   1.0
2020-06-05 02:41:45+00:00  1.13287  1.13287  1.13287  1.13287   1.0
2020-06-05 02:41:50+00:00  1.13289  1.13289  1.13289  1.13289   1.0
2020-06-05 02:42:00+00:00  1.13290  1.13290  1.13290  1.13290   1.0
2020-06-05 02:42:05+00:00  1.13289  1.13289  1.13289  1.13289   1.0
2020-06-05 02:42:10+00:00  1.13290  1.13293  1.13288  1.13288   6.0
2020-06-05 02:42:25+00:00  1.13290  1.13290  1.13290  1.13290   1.0
2020-06-05 02:42:30+00:00  1.13291  1.13294  1.13291  1.13292   7.0
2020-06-05 02:43:05+00:00  1.13290  1.13290  1.13286  1.13286  13.0
2020-06-05 02:43:10+00:00  1.13285  1.13286  1.13284  1.13286   3.0
2020-06-05 02:43:15+00:00  1.13287  1.13287  1.13287  1.13287   1.0
2020-06-05 02:43:20+00:00  1.13286  1.13286  1.13286  1.13286   1.0
2020-06-05 02:43:25+00:00  1.13286  1.13290  1.13286  1.13290   3.0
2020-06-05 02:43:35+00:00  1.13292  1.13292  1.13292  1.13292   1.0
2020-06-05 02:43:55+00:00  1.13290  1.13290  1.13290  1.13290   1.0
2020-06-05 02:44:00+00:00  1.13291  1.13291  1.13290  1.13290   4.0
2020-06-05 02:44:10+00:00  1.13291  1.13291  1.13288  1.13288   3.0
2020-06-05 02:44:30+00:00  1.13287  1.13288  1.13284  1.13285   7.0
2020-06-05 02:44:35+00:00  1.13283  1.13288  1.13282  1.13287   9.0
...                            ...      ...      ...      ...   ...
2020-06-05 03:43:10+00:00  1.13364  1.13364  1.13358  1.13358   5.0
2020-06-05 03:43:15+00:00  1.13360  1.13362  1.13360  1.13361   3.0
2020-06-05 03:43:25+00:00  1.13360  1.13361  1.13360  1.13360   3.0
2020-06-05 03:43:40+00:00  1.13358  1.13358  1.13358  1.13358   2.0
2020-06-05 03:43:55+00:00  1.13356  1.13356  1.13353  1.13355  10.0
2020-06-05 03:44:10+00:00  1.13354  1.13356  1.13354  1.13356   4.0
2020-06-05 03:44:15+00:00  1.13354  1.13355  1.13354  1.13354   3.0
2020-06-05 03:44:20+00:00  1.13356  1.13357  1.13356  1.13357   2.0
2020-06-05 03:44:30+00:00  1.13359  1.13362  1.13359  1.13360   7.0
2020-06-05 03:44:35+00:00  1.13359  1.13360  1.13359  1.13360   2.0
2020-06-05 03:44:45+00:00  1.13359  1.13359  1.13359  1.13359   1.0
2020-06-05 03:44:50+00:00  1.13360  1.13360  1.13360  1.13360   1.0
2020-06-05 03:45:00+00:00  1.13362  1.13364  1.13362  1.13363   3.0
2020-06-05 03:45:05+00:00  1.13361  1.13362  1.13356  1.13361  10.0
2020-06-05 03:45:10+00:00  1.13362  1.13364  1.13362  1.13362   3.0
2020-06-05 03:45:15+00:00  1.13364  1.13364  1.13364  1.13364   1.0
2020-06-05 03:45:20+00:00  1.13362  1.13362  1.13362  1.13362   1.0
2020-06-05 03:45:25+00:00  1.13361  1.13364  1.13361  1.13364   5.0
2020-06-05 03:45:30+00:00  1.13362  1.13362  1.13361  1.13361   2.0
2020-06-05 03:45:35+00:00  1.13362  1.13362  1.13362  1.13362   1.0
2020-06-05 03:45:40+00:00  1.13361  1.13362  1.13359  1.13362   5.0
2020-06-05 03:45:45+00:00  1.13364  1.13364  1.13363  1.13363   2.0
2020-06-05 03:45:50+00:00  1.13364  1.13364  1.13363  1.13364   5.0
2020-06-05 03:45:55+00:00  1.13363  1.13363  1.13362  1.13363   3.0
2020-06-05 03:46:05+00:00  1.13365  1.13365  1.13365  1.13365   1.0
2020-06-05 03:46:15+00:00  1.13363  1.13364  1.13363  1.13364   2.0
2020-06-05 03:46:25+00:00  1.13366  1.13366  1.13366  1.13366   1.0
2020-06-05 03:46:40+00:00  1.13368  1.13368  1.13362  1.13362   5.0
2020-06-05 03:47:00+00:00  1.13364  1.13366  1.13364  1.13366   2.0
2020-06-05 03:47:10+00:00  1.13364  1.13364  1.13364  1.13364   1.0

[500 rows x 5 columns]
>>> fast_ma = bt.sma(period=5)
>>> fast_ma
T
2020-06-05 02:40:40+00:00         NaN
2020-06-05 02:40:45+00:00         NaN
2020-06-05 02:40:50+00:00         NaN
2020-06-05 02:40:55+00:00         NaN
2020-06-05 02:41:00+00:00    1.132914
2020-06-05 02:41:05+00:00    1.132900
2020-06-05 02:41:10+00:00    1.132888
2020-06-05 02:41:20+00:00    1.132864
2020-06-05 02:41:25+00:00    1.132850
2020-06-05 02:41:30+00:00    1.132844
2020-06-05 02:41:35+00:00    1.132840
2020-06-05 02:41:40+00:00    1.132844
2020-06-05 02:41:45+00:00    1.132854
2020-06-05 02:41:50+00:00    1.132864
2020-06-05 02:42:00+00:00    1.132872
2020-06-05 02:42:05+00:00    1.132882
2020-06-05 02:42:10+00:00    1.132886
2020-06-05 02:42:25+00:00    1.132892
2020-06-05 02:42:30+00:00    1.132898
2020-06-05 02:43:05+00:00    1.132890
2020-06-05 02:43:10+00:00    1.132884
2020-06-05 02:43:15+00:00    1.132882
2020-06-05 02:43:20+00:00    1.132874
2020-06-05 02:43:25+00:00    1.132870
2020-06-05 02:43:35+00:00    1.132882
2020-06-05 02:43:55+00:00    1.132890
2020-06-05 02:44:00+00:00    1.132896
2020-06-05 02:44:10+00:00    1.132900
2020-06-05 02:44:30+00:00    1.132890
2020-06-05 02:44:35+00:00    1.132880
                               ...
2020-06-05 03:43:10+00:00    1.133630
2020-06-05 03:43:15+00:00    1.133622
2020-06-05 03:43:25+00:00    1.133610
2020-06-05 03:43:40+00:00    1.133598
2020-06-05 03:43:55+00:00    1.133584
2020-06-05 03:44:10+00:00    1.133580
2020-06-05 03:44:15+00:00    1.133566
2020-06-05 03:44:20+00:00    1.133560
2020-06-05 03:44:30+00:00    1.133564
2020-06-05 03:44:35+00:00    1.133574
2020-06-05 03:44:45+00:00    1.133580
2020-06-05 03:44:50+00:00    1.133592
2020-06-05 03:45:00+00:00    1.133604
2020-06-05 03:45:05+00:00    1.133606
2020-06-05 03:45:10+00:00    1.133610
2020-06-05 03:45:15+00:00    1.133620
2020-06-05 03:45:20+00:00    1.133624
2020-06-05 03:45:25+00:00    1.133626
2020-06-05 03:45:30+00:00    1.133626
2020-06-05 03:45:35+00:00    1.133626
2020-06-05 03:45:40+00:00    1.133622
2020-06-05 03:45:45+00:00    1.133624
2020-06-05 03:45:50+00:00    1.133624
2020-06-05 03:45:55+00:00    1.133628
2020-06-05 03:46:05+00:00    1.133634
2020-06-05 03:46:15+00:00    1.133638
2020-06-05 03:46:25+00:00    1.133644
2020-06-05 03:46:40+00:00    1.133640
2020-06-05 03:47:00+00:00    1.133646
2020-06-05 03:47:10+00:00    1.133644
Name: C, Length: 500, dtype: float64
>>> slow_ma = bt.sma(period=25)
>>> slow_ma
T
2020-06-05 02:40:40+00:00         NaN
2020-06-05 02:40:45+00:00         NaN
2020-06-05 02:40:50+00:00         NaN
2020-06-05 02:40:55+00:00         NaN
2020-06-05 02:41:00+00:00         NaN
2020-06-05 02:41:05+00:00         NaN
2020-06-05 02:41:10+00:00         NaN
2020-06-05 02:41:20+00:00         NaN
2020-06-05 02:41:25+00:00         NaN
2020-06-05 02:41:30+00:00         NaN
2020-06-05 02:41:35+00:00         NaN
2020-06-05 02:41:40+00:00         NaN
2020-06-05 02:41:45+00:00         NaN
2020-06-05 02:41:50+00:00         NaN
2020-06-05 02:42:00+00:00         NaN
2020-06-05 02:42:05+00:00         NaN
2020-06-05 02:42:10+00:00         NaN
2020-06-05 02:42:25+00:00         NaN
2020-06-05 02:42:30+00:00         NaN
2020-06-05 02:43:05+00:00         NaN
2020-06-05 02:43:10+00:00         NaN
2020-06-05 02:43:15+00:00         NaN
2020-06-05 02:43:20+00:00         NaN
2020-06-05 02:43:25+00:00         NaN
2020-06-05 02:43:35+00:00    1.132880
2020-06-05 02:43:55+00:00    1.132879
2020-06-05 02:44:00+00:00    1.132879
2020-06-05 02:44:10+00:00    1.132877
2020-06-05 02:44:30+00:00    1.132874
2020-06-05 02:44:35+00:00    1.132874
                               ...
2020-06-05 03:43:10+00:00    1.133557
2020-06-05 03:43:15+00:00    1.133561
2020-06-05 03:43:25+00:00    1.133565
2020-06-05 03:43:40+00:00    1.133568
2020-06-05 03:43:55+00:00    1.133572
2020-06-05 03:44:10+00:00    1.133574
2020-06-05 03:44:15+00:00    1.133576
2020-06-05 03:44:20+00:00    1.133579
2020-06-05 03:44:30+00:00    1.133581
2020-06-05 03:44:35+00:00    1.133583
2020-06-05 03:44:45+00:00    1.133585
2020-06-05 03:44:50+00:00    1.133587
2020-06-05 03:45:00+00:00    1.133592
2020-06-05 03:45:05+00:00    1.133597
2020-06-05 03:45:10+00:00    1.133602
2020-06-05 03:45:15+00:00    1.133607
2020-06-05 03:45:20+00:00    1.133606
2020-06-05 03:45:25+00:00    1.133608
2020-06-05 03:45:30+00:00    1.133608
2020-06-05 03:45:35+00:00    1.133607
2020-06-05 03:45:40+00:00    1.133606
2020-06-05 03:45:45+00:00    1.133606
2020-06-05 03:45:50+00:00    1.133605
2020-06-05 03:45:55+00:00    1.133604
2020-06-05 03:46:05+00:00    1.133606
2020-06-05 03:46:15+00:00    1.133608
2020-06-05 03:46:25+00:00    1.133610
2020-06-05 03:46:40+00:00    1.133611
2020-06-05 03:47:00+00:00    1.133614
2020-06-05 03:47:10+00:00    1.133618
Name: C, Length: 500, dtype: float64
>>> bt.run()
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
  File "C:\python3\lib\site-packages\oanda_backtest\oanda_backtest.py", line 238, in run
    buy_entry_s = np.hstack((False, self._buy_entry[:-1]))  # shift
AttributeError: 'Backtest' object has no attribute '_buy_entry'
>>> bt.sell_exit = bt.buy_entry = (fast_ma > slow_ma) & (fast_ma.shift() <= slow_ma.shift())
>>> bt.buy_exit = bt.sell_entry = (fast_ma < slow_ma) & (fast_ma.shift() >= slow_ma.shift())
>>> bt.run()
total profit        -2.400
total trades        34.000
win rate            35.294
profit factor        0.776
maximum drawdown     4.800
recovery factor     -0.500
riskreward ratio     1.228
sharpe ratio        -0.092
average return      -6.226
stop loss            0.000
take profit          0.000
dtype: float64
>>> bt.plot()
>>>


